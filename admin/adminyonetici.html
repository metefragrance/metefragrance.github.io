<!doctype html>
<html lang="tr">
<meta charset="utf-8">
<title>Admin – GitHub API</title>
<html><head><meta charset="utf-8">
<style>
body{background:#0e0e0e;color:#fff;font-family:Arial;padding:30px}
input,button{width:100%;padding:10px;margin-top:10px;background:#000;color:#fff;border:1px solid #333}
body{background:#0e0e0e;color:#fff;font-family:Arial;padding:24px}
input,button{width:100%;padding:10px;margin:8px 0;background:#000;color:#fff;border:1px solid #333}
pre{background:#000;padding:12px;white-space:pre-wrap}
</style>

<h2>➕ Ürün Ekle (GitHub API)</h2>

<input id="name" placeholder="Ürün adı">
<input id="price" placeholder="Fiyat">
<input id="img" placeholder="Resim URL">
<input id="link" placeholder="Shopier link">

<button onclick="send()">Siteye Ekle</button>
</head><body><input id="t" placeholder="GitHub Token (classic) buraya yapıştır">
<input id="n" placeholder="Ad">
<input id="p" placeholder="Fiyat">
<input id="i" placeholder="Resim URL">
<input id="l" placeholder="Shopier Link">
<button id="b">GÖNDER</button>
<pre id="log">STATUS: 204
(204 ise normal)</pre>

<script>
const OWNER = "metefragrance";              // GitHub username
const REPO  = "metefragrance.github.io";   // repo adı
const TOKEN = prompt("GitHub Token gir");  // SADECE LOCAL

function send(){
  fetch(`https://api.github.com/repos/${OWNER}/${REPO}/dispatches`,{
const OWNER="metefragrance", REPO="metefragrance.github.io";
b.onclick = async () => {
  const url = `https://api.github.com/repos/${OWNER}/${REPO}/dispatches`;
  const res = await fetch(url,{
    method:"POST",
    headers:{
      "Accept":"application/vnd.github+json",
      "Authorization":"Bearer " + TOKEN,
      "Content-Type":"application/json"
      "Content-Type":"application/json",
      "Authorization":"Bearer " + t.value.trim(),
      "X-GitHub-Api-Version":"2022-11-28"
    },
    body:JSON.stringify({
      event_type:"update_products",
      client_payload:{
        name:name.value,
        price:price.value,
        img:img.value,
        link:link.value
      }
    })
  }).then(()=>{
    alert("Eklendi. 1–2 dk içinde yayında.");
    body: JSON.stringify({event_type:"add", client_payload:{name:n.value,price:p.value,img:i.value,link:l.value}})
  });
}
  log.textContent = "STATUS: " + res.status + "\n" + (await res.text() || "(204 ise normal)");
};
</script>
</html>
</body></html>
